"use strict";(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[460],{4387:(e,s,l)=>{l.d(s,{R:()=>h});var t=l(3003),a=l(2099);const n=e=>e.chats,i=(0,a.Mz)([n],e=>e.activeChats),o=(0,a.Mz)([n],e=>e.chats),d=(0,a.Mz)([n],e=>e.loading),c=(0,a.Mz)([n],e=>e.error),r=(0,a.Mz)([n],e=>e.visitedChatIds),u={},v=e=>(u[e]||(u[e]=(0,a.Mz)([o],s=>s.find(s=>s.id===e)||null)),u[e]),h=()=>{const e=(0,t.wA)();return{activeChats:(0,t.d4)(i),isLoading:(0,t.d4)(d),errorChats:(0,t.d4)(c),chats:(0,t.d4)(o),chatById:(0,t.d4)(v),dispatch:e,visitedChatIds:(0,t.d4)(r)}}},4546:(e,s,l)=>{e.exports=l.p+"static/media/Roby.6b39299d91cec669273d.jpg"},4921:e=>{e.exports="data:image/jpeg;base64,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"},7907:(e,s,l)=>{l.r(s),l.d(s,{default:()=>me});var t=l(5043),a=l(3216),n=l(8387),i=l(3003),o=l(5140),d=l(4387),c=l(5475),r=l(9657);function u(e){if(!e)return null;const s=new Date(e);if(!isNaN(s.getTime()))return s;const l=e.replace(/T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?Z$/,function(e,s,l,t){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"000";return`T${s}:${l}:${Math.min(Number(t),59).toString().padStart(2,"0")}.${a.padEnd(3,"0")}Z`}),t=new Date(l);if(!isNaN(t.getTime()))return t;const a=new Date(Date.parse(e));return isNaN(a.getTime())?null:a}var v=l(184),h=l(4921),m=l(4546);const A=l.p+"static/media/global.52434f389adfe2070516.png",C={list:"ChatsList_list__FlZ6G",listItem:"ChatsList_listItem__zxfOQ",globalLink:"ChatsList_globalLink__sxqW3",active:"ChatsList_active__zhMD0",isBlocked:"ChatsList_isBlocked__QUxjE",youAreBlocked:"ChatsList_youAreBlocked__Y4FSN",youAreBlockedSpan:"ChatsList_youAreBlockedSpan__2ScBk",isBlockedSpan:"ChatsList_isBlockedSpan__GKqD9",imgCont:"ChatsList_imgCont__JmYwI",userImg:"ChatsList_userImg__XjskM",global:"ChatsList_global__Hs7l3",isOnline:"ChatsList_isOnline__YoV65",online:"ChatsList_online__cCUJM",notOnline:"ChatsList_notOnline__LsGCh",infoCont:"ChatsList_infoCont__Fsgba",name:"ChatsList_name__7rZVZ",lastMessage:"ChatsList_lastMessage__zfTJs",notRead:"ChatsList_notRead__KnXUc",settingsCont:"ChatsList_settingsCont__ojlZo",btnCont:"ChatsList_btnCont__dYM4I",modalCont:"ChatsList_modalCont__puUiq",modalContDark:"ChatsList_modalContDark__4YNbL",modalContViolet:"ChatsList_modalContViolet__GtKXG",modalBtn:"ChatsList_modalBtn__OuhR2",modalBtnB:"ChatsList_modalBtnB__j9ZRt",modalBtnNb:"ChatsList_modalBtnNb__kUcJO",modalBtnNotLight:"ChatsList_modalBtnNotLight__eR9DR"};var x=l(579);const N="(max-width: 767px)";const _=function(e){var s,l;let{search:_,theme:p}=e;const{chats:g}=(0,d.R)(),{chatId:j}=(0,a.g)(),k=(0,i.wA)(),B=(0,a.Zp)(),b=(0,t.useRef)(null),[f,y]=(0,t.useState)({}),[H,I]=(0,t.useState)(!1);(0,t.useEffect)(()=>{function e(e){b.current&&!b.current.contains(e.target)&&I(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[b]),(0,t.useEffect)(()=>{j&&k((0,o.uF)({chatId:j}))},[k,j]);const w=(0,r.Ub)({query:N});function R(e){var s;const l=(null===e||void 0===e||null===(s=e.messages)||void 0===s?void 0:s.filter(e=>null===e||void 0===e?void 0:e.isInbox))||[];return l.length?l.reduce((e,s)=>{const l=u(s.sentAt),t=u(e.sentAt);return l?t?l>t?s:e:s:e},l[0]):null}const S=(g||[]).filter(e=>{var s,l;return"global"!==(null===e||void 0===e?void 0:e.id)&&"admin"!==(null===e||void 0===e?void 0:e.id)&&(null===e||void 0===e||null===(s=e.user)||void 0===s||null===(l=s.name)||void 0===l?void 0:l.toLowerCase().includes(_.toLowerCase()))}),V=null===g||void 0===g?void 0:g.filter(e=>"admin"===(null===e||void 0===e?void 0:e.id)),L=null===g||void 0===g?void 0:g.find(e=>"global"===(null===e||void 0===e?void 0:e.id)),O=[];null===L||void 0===L||null===(s=L.users)||void 0===s||s.forEach(e=>{var s;const l={userId:null===e||void 0===e?void 0:e.id,user:null===e||void 0===e?void 0:e.user};null===e||void 0===e||null===(s=e.messages)||void 0===s||s.forEach(e=>{O.push({...e,...l})})});const E=function(e){return null!==e&&void 0!==e&&e.length?e.filter(e=>e.isInbox).reduce((e,s)=>{const l=new Date(e.sentAt);return new Date(s.sentAt)>l?s:e}):null}(O);function X(){I(!H)}function D(){k((0,o.TZ)({chatId:j}))}function q(){k((0,o.hG)({chatId:j}))}return(0,x.jsxs)("ul",{className:C.list,children:[(null===V||void 0===V?void 0:V.length)>0?V.map(e=>{var s,l,t,a,i,d,r,u;return(0,x.jsx)("li",{children:(0,x.jsxs)(c.k2,{to:`/home/chat/${e.id}`,className:s=>{var l;let{isActive:t}=s;return(0,n.A)(C.listItem,{[C.active]:t,[C.youAreBlocked]:null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.youAreBlocked})},onClick:()=>{k((0,o.H9)({chatId:e.id})),k((0,o.uF)({chatId:j}))},children:[(0,x.jsxs)("div",{className:C.imgCont,children:[(0,x.jsx)("img",{className:C.userImg,src:m,alt:"Admin img",loading:"lazy"},"admin"),(0,x.jsx)("div",{className:(0,n.A)(C.isOnline,null!==e&&void 0!==e&&null!==(s=e.user)&&void 0!==s&&s.isOnline?C.online:C.notOnline)})]}),(0,x.jsxs)("div",{className:C.infoCont,children:[(0,x.jsx)("p",{className:C.name,children:null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.name}),(0,x.jsx)("p",{className:(0,n.A)(C.lastMessage,!1===(null===(t=R(e))||void 0===t?void 0:t.isRead)&&C.notRead),children:(null===(a=R(e))||void 0===a?void 0:a.content)||"No messages yet"})]}),"admin"!==(null===e||void 0===e?void 0:e.id)&&"global"!==(null===e||void 0===e?void 0:e.id)&&(0,x.jsxs)("div",{className:C.settingsCont,children:[(0,x.jsx)("button",{onClick:X,type:"button",className:C.btnCont,children:(0,x.jsx)(v.Pcn,{size:w?12:18,color:"#161616cc",className:C.cogIcon})}),H&&(null===e||void 0===e?void 0:e.id)===j&&(0,x.jsxs)("div",{ref:b,className:(0,n.A)(C.modalCont,"dark"===p&&C.modalContDark,"violet"===p&&C.modalContViolet),children:[(0,x.jsx)("button",{type:"button",className:(0,n.A)(C.modalBtn,null!==e&&void 0!==e&&null!==(i=e.user)&&void 0!==i&&i.isBlocked?C.modalBtnB:C.modalBtnNb),onClick:D,children:null!==e&&void 0!==e&&null!==(d=e.user)&&void 0!==d&&d.isBlocked?"Unblock...\ud83d\udd13":"Block...\ud83d\udeab"}),(0,x.jsx)("button",{type:"button",className:(0,n.A)(C.modalBtn,"light"!==p&&C.modalBtnNotLight),onClick:e=>{e.stopPropagation(),e.preventDefault(),q(),B("/home/chat")},children:"Delete"})]})]}),(null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.youAreBlocked)&&(0,x.jsx)("span",{className:C.youAreBlockedSpan,children:"\ud83d\udeab"}),(null===e||void 0===e||null===(u=e.user)||void 0===u?void 0:u.isBlocked)&&(0,x.jsx)("span",{className:C.isBlockedSpan,children:"\ud83d\udeab"})]})},e.id)}):(0,x.jsx)("li",{className:C.empty,children:"No chats found"}),(0,x.jsx)("li",{children:(0,x.jsxs)(c.k2,{to:"/home/chat/global",className:e=>{let{isActive:s}=e;return(0,n.A)(C.listItem,C.globalLink,{[C.active]:s})},onClick:()=>{k((0,o.$f)({chatId:j}))},children:[(0,x.jsxs)("div",{className:C.imgCont,children:[(0,x.jsx)("img",{className:(0,n.A)(C.userImg,C.global),src:A,alt:"User Global img",loading:"lazy"}),(0,x.jsx)("div",{className:(0,n.A)(C.isOnline,C.online)})]}),(0,x.jsxs)("div",{className:C.infoCont,children:[(0,x.jsx)("p",{className:C.name,children:"Global"}),(0,x.jsx)("p",{className:(0,n.A)(C.lastMessage,!(null!==E&&void 0!==E&&E.isRead)&&C.notRead),children:E.content||"No messages yet"})]}),(null===(l=L.user)||void 0===l?void 0:l.youAreBlocked)&&(0,x.jsx)("span",{className:C.youAreBlockedSpan,children:"\ud83d\udeab"})]})},"global"),(null===S||void 0===S?void 0:S.length)>0?S.map(e=>{var s,l,t,a,i,d,r,u,A,N;return(0,x.jsx)("li",{children:(0,x.jsxs)(c.k2,{to:`/home/chat/${e.id}`,className:s=>{var l,t;let{isActive:a}=s;return(0,n.A)(C.listItem,{[C.active]:a,[C.isBlocked]:null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.isBlocked,[C.youAreBlocked]:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.youAreBlocked})},onClick:()=>{k((0,o.H9)({chatId:e.id})),k((0,o.uF)({chatId:j}))},children:[(0,x.jsxs)("div",{className:C.imgCont,children:[(0,x.jsx)("img",{className:C.userImg,src:"admin"===e.id?m:null!==(s=null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.avatar)&&void 0!==s?s:h,alt:"User img",loading:"lazy",onError:()=>(e=>{setTimeout(()=>{y(s=>({...s,[e]:(s[e]||0)+1}))},1e3)})(e.id)},f[e.id]||0),(0,x.jsx)("div",{className:(0,n.A)(C.isOnline,null!==e&&void 0!==e&&null!==(t=e.user)&&void 0!==t&&t.isOnline?C.online:C.notOnline)})]}),(0,x.jsxs)("div",{className:C.infoCont,children:[(0,x.jsx)("p",{className:C.name,children:null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.name}),(0,x.jsx)("p",{className:(0,n.A)(C.lastMessage,!1===(null===(i=R(e))||void 0===i?void 0:i.isRead)&&C.notRead),children:(null===(d=R(e))||void 0===d?void 0:d.content)||"No messages yet"})]}),"admin"!==(null===e||void 0===e?void 0:e.id)&&"global"!==(null===e||void 0===e?void 0:e.id)&&(0,x.jsxs)("div",{className:C.settingsCont,children:[(0,x.jsx)("button",{onClick:X,type:"button",className:C.btnCont,children:(0,x.jsx)(v.Pcn,{size:w?12:18,color:"#161616cc",className:C.cogIcon})}),H&&(null===e||void 0===e?void 0:e.id)===j&&(0,x.jsxs)("div",{ref:b,className:(0,n.A)(C.modalCont,"dark"===p&&C.modalContDark,"violet"===p&&C.modalContViolet),children:[(0,x.jsx)("button",{type:"button",className:(0,n.A)(C.modalBtn,null!==e&&void 0!==e&&null!==(r=e.user)&&void 0!==r&&r.isBlocked?C.modalBtnB:C.modalBtnNb),onClick:D,children:null!==e&&void 0!==e&&null!==(u=e.user)&&void 0!==u&&u.isBlocked?"Unblock...\ud83d\udd13":"Block...\ud83d\udeab"}),(0,x.jsx)("button",{type:"button",className:(0,n.A)(C.modalBtn,"light"!==p&&C.modalBtnNotLight),onClick:e=>{e.stopPropagation(),e.preventDefault(),q(),B("/home/chat")},children:"Delete"})]})]}),(null===e||void 0===e||null===(A=e.user)||void 0===A?void 0:A.youAreBlocked)&&(0,x.jsx)("span",{className:C.youAreBlockedSpan,children:"\ud83d\udeab"}),(null===e||void 0===e||null===(N=e.user)||void 0===N?void 0:N.isBlocked)&&(0,x.jsx)("span",{className:C.isBlockedSpan,children:"\ud83d\udeab"})]})},e.id)}):(0,x.jsx)("li",{className:C.empty,children:"No chats found"})]})},p="ChatInput_inputContainer__Dio7V",g="ChatInput_input__OKOss";const j=function(e){let{type:s,placeholder:l,required:t,className:a,name:i,handleChange:o,width:d,value:c,paddingLeft:r,autoComplete:u,handleBlur:v,children:h,textarea:m=!1}=e;const A={autoComplete:u||"off",style:{paddingLeft:r||"0px"},onChange:o,name:i||"",className:(0,n.A)(g,a),placeholder:l||"",required:t||!1,value:c||"",onBlur:v};return(0,x.jsxs)("div",{style:{width:d||"auto"},className:p,children:[m?(0,x.jsx)("textarea",{...A,rows:"1",className:(0,n.A)(g,a)}):(0,x.jsx)("input",{className:(0,n.A)(g,a),...A,type:s||"text"}),h]})};var k=l(3910),B=l(7929);const b={aside:"ChatsAside_aside__GSkqe",asideContent:"ChatsAside_asideContent__DQBIs",asideNewMesgBtn:"ChatsAside_asideNewMesgBtn__RoQer",newMsgCont:"ChatsAside_newMsgCont__o5C4x",listCont:"ChatsAside_listCont__m6wYY",list:"ChatsAside_list__kNelU",closeButton:"ChatsAside_closeButton__7mzIO",listItem:"ChatsAside_listItem__rM647",isBlocked:"ChatsAside_isBlocked__Mc4lQ",youAreBlocked:"ChatsAside_youAreBlocked__lgZmZ",imgCont:"ChatsAside_imgCont__hqjeX",userImg:"ChatsAside_userImg__Qyqle",isOnline:"ChatsAside_isOnline__RKD21",online:"ChatsAside_online__8elmH",notOnline:"ChatsAside_notOnline__Tu3w3",infoCont:"ChatsAside_infoCont__ogDpi",name:"ChatsAside_name__fOC95",lastMessage:"ChatsAside_lastMessage__r08XJ",notRead:"ChatsAside_notRead__GPIkF",youAreBlockedSpan:"ChatsAside_youAreBlockedSpan__evbE5",asideInput:"ChatsAside_asideInput__NwS97",asideInputButton:"ChatsAside_asideInputButton__2Cbyf",asideInputSearchIcon:"ChatsAside_asideInputSearchIcon__UNoxz",asideChatListCont:"ChatsAside_asideChatListCont__JSHcj"};function f(e){var s;let{isBlocked:l,theme:a}=e;const{chats:r}=(0,d.R)(),A=(0,t.useRef)(null),C=(0,i.wA)(),[N,p]=(0,t.useState)(!1),[g,f]=(0,t.useState)(""),[y,H]=(0,t.useState)({});(0,t.useEffect)(()=>{function e(e){A.current&&!A.current.contains(e.target)&&p(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[A]);const I=null===(s=[...r])||void 0===s?void 0:s.filter(e=>{var s;return null===e||void 0===e||null===(s=e.messages)||void 0===s?void 0:s.find(e=>!0===e.isInbox&&!1===e.isRead)});function w(e){return((null===e||void 0===e?void 0:e.messages.filter(e=>null===e||void 0===e?void 0:e.isInbox))||{}).reduce((e,s)=>new Date(u(null===e||void 0===e?void 0:e.sentAt))>new Date(u(null===s||void 0===s?void 0:s.sentAt))?e:s)}return(0,x.jsx)("aside",{className:b.aside,children:(0,x.jsxs)("div",{className:b.asideContent,children:[I.length>0&&(0,x.jsxs)("div",{ref:A,className:b.newMsgCont,children:[(0,x.jsxs)("button",{className:b.asideNewMesgBtn,onClick:()=>p(!N),children:["New...",(0,x.jsx)(v.maD,{className:b.newMsgSvg})]}),N&&(0,x.jsxs)("div",{className:b.listCont,children:[(0,x.jsx)("button",{className:b.closeButton,onClick:()=>p(!1),type:"button",children:"X"}),(0,x.jsx)("ul",{className:b.list,children:I.map(e=>{var s,l,t,a,i,d,r,u;return(0,x.jsx)("li",{children:(0,x.jsxs)(c.k2,{to:`/home/chat/${null===e||void 0===e?void 0:e.id}`,className:(0,n.A)(b.listItem,(null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.isBlocked)&&b.isBlocked,(null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.youAreBlocked)&&b.youAreBlocked),onClick:()=>{p(!1),C((0,o.H9)({chatId:null===e||void 0===e?void 0:e.id})),C((0,o.uF)({chatId:null===e||void 0===e?void 0:e.id}))},children:[(0,x.jsxs)("div",{className:b.imgCont,children:[(0,x.jsx)("img",{className:b.userImg,src:"admin"===e.id?m:null!==(t=null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.avatar)&&void 0!==t?t:h,alt:"User img",loading:"lazy",onError:()=>{return s=e.id,void setTimeout(()=>{H(e=>({...e,[s]:(e[s]||0)+1}))},1e3);var s}},y[e.id]||0),(0,x.jsx)("div",{className:(0,n.A)(b.isOnline,null!==e&&void 0!==e&&null!==(i=e.user)&&void 0!==i&&i.isOnline?b.online:b.notOnline)})]}),(0,x.jsxs)("div",{className:b.infoCont,children:[(0,x.jsx)("p",{className:b.name,children:null===e||void 0===e||null===(d=e.user)||void 0===d?void 0:d.name}),(0,x.jsx)("p",{className:(0,n.A)(b.lastMessage,b.notRead),children:(null===(r=w(e))||void 0===r?void 0:r.content)||"No messages yet"})]}),(null===e||void 0===e||null===(u=e.user)||void 0===u?void 0:u.youAreBlocked)&&(0,x.jsx)("span",{className:b.youAreBlockedSpan,children:"\ud83d\udeab"})]})},null===e||void 0===e?void 0:e.id)})})]})]}),(0,x.jsx)(j,{className:b.asideInput,paddingLeft:"18px",placeholder:"Search...",value:g,handleChange:e=>f(e.target.value),children:(0,x.jsx)("button",{className:b.asideInputButton,children:(0,x.jsx)(k.g,{className:b.asideInputSearchIcon,icon:B.$UM})})}),(0,x.jsx)("div",{className:b.asideChatListCont,children:(0,x.jsx)(_,{theme:a,search:g})})]})})}const y="ActiveChatModal_chatList__hcI2m",H="ActiveChatModal_closeButton__TLNlh",I="ActiveChatModal_chatListItem__PYA2N",w="ActiveChatModal_avatar__dXJJk",R="ActiveChatModal_usersInfo__4JxRz",S="ActiveChatModal_userName__TLoRt",V="ActiveChatModal_reply__gusqt";function L(e){let{chats:s,closeModal:l}=e;const a=(0,t.useRef)(),{visitedChatIds:n}=(0,d.R)();(0,t.useEffect)(()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&l()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[l]);const i=s.filter(e=>n.includes(e.id));return(0,x.jsx)("div",{ref:a,children:(0,x.jsxs)("ul",{className:y,children:[(0,x.jsx)("button",{className:H,onClick:l,type:"button",children:"X"}),(0,x.jsx)("li",{className:I,children:(0,x.jsxs)(c.N_,{to:"/home/chat/global",onClick:l,children:[(0,x.jsx)("img",{src:A,alt:"Avatar",className:w,loading:"lazy"}),(0,x.jsxs)("div",{className:R,children:[(0,x.jsx)("span",{className:S,children:"Global"}),(0,x.jsx)("span",{className:V,children:"Reply..."})]})]})},"globalH"),i.map(e=>{var s,t;return"global"!==(null===e||void 0===e?void 0:e.id)?(0,x.jsx)("li",{className:I,children:(0,x.jsxs)(c.N_,{to:`/home/chat/${e.id}`,onClick:l,children:[(0,x.jsx)("img",{src:"admin"===e.id?m:null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.avatar,alt:"Avatar",className:w,loading:"lazy"}),(0,x.jsxs)("div",{className:R,children:[(0,x.jsx)("span",{className:S,children:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.name}),(0,x.jsx)("span",{className:V,children:"Reply..."})]})]})},e.id):null})]})})}const O="ChatHeader_header__8hzgN",E="ChatHeader_asideHeader__m+Ghc",X="ChatHeader_asideHeaderTitle__-WHbJ",D="ChatHeader_asideHeaderCounter__pihhK",q="ChatHeader_chatHeaderRight__NXGAd",P="ChatHeader_chatInfo__rl-wa",Z="ChatHeader_avatar__jyAaV",G="ChatHeader_usersInfo__vlq0e",M="ChatHeader_userName__Cbf5v",z="ChatHeader_noLight__POBBM",Q="ChatHeader_reply__Vt64d",W="ChatHeader_rightContButton__-59aM",K="ChatHeader_button__et2hb";const T=function(e){var s;let{theme:l}=e;const{chatId:i}=(0,a.g)(),{activeChats:o,chats:c}=(0,d.R)(),r=c.find(e=>e.id===i),[u,h]=(0,t.useState)(!1),C=()=>h(e=>!e);return(0,x.jsxs)("div",{className:(0,n.A)(O),children:[(0,x.jsxs)("div",{className:E,children:[(0,x.jsx)("p",{className:(0,n.A)(X,"light"!==l&&z),children:"Active"}),(0,x.jsx)("div",{className:D,children:o})]}),(0,x.jsxs)("div",{className:q,children:[u&&(0,x.jsx)(L,{chats:c,closeModal:C}),r?(0,x.jsxs)("div",{className:P,children:[(0,x.jsx)("img",{src:"admin"===r.id?m:"global"===r.id?A:r.user.avatar,alt:"Avatar",className:Z}),(0,x.jsxs)("div",{className:G,children:[(0,x.jsx)("span",{className:(0,n.A)(M,"light"!==l&&z),children:null===r||void 0===r||null===(s=r.user)||void 0===s?void 0:s.name}),(0,x.jsx)("span",{className:Q,children:"Reply"})]})]}):(0,x.jsxs)("div",{className:P,children:[(0,x.jsx)("img",{src:A,alt:"Avatar",className:Z}),(0,x.jsxs)("div",{className:G,children:[(0,x.jsx)("span",{className:(0,n.A)(M,"light"!==l&&z),children:"Global"}),(0,x.jsx)("span",{className:Q,children:"Reply"})]})]}),(0,x.jsx)("button",{className:(0,n.A)(W),onClick:C,children:(0,x.jsx)(v.HFM,{size:16,className:K})})]})]})};var U=l(4258);const Y="ChatPage_cont__QpD6A",F="ChatPage_lightCont__Y6Rn2",J="ChatPage_darkCont__sHvhS",$="ChatPage_violetCont__ih5gN",ee="ChatPage_content__OKBkp",se="ChatPage_main__mBvHu",le="ChatPage_sendMsgCont__Z0Vnr",te="ChatPage_sendMsgInput__1ItuK",ae="ChatPage_writeMsgButton__KpWwN",ne="ChatPage_paperClipIcon__JCakf",ie="ChatPage_emojiWrapper__+R1SK",oe="ChatPage_smileIcon__D7I1A",de="ChatPage_emojiPicker__66oc7",ce="ChatPage_sendButtonCont__ymqy8",re="ChatPage_sendMsgButton__W9crT",ue="ChatPage_sendBlocked__OqsVB",ve="ChatPage_sendIcon__udfGq",he="ChatPage_blockSpan__8HFBZ";const me=function(){var e,s,l,c,r,u,h,m,A;const{chats:C}=(0,d.R)(),{chatId:N}=(0,a.g)(),_=(0,i.wA)(),p=(0,a.Zp)(),g=(0,t.useRef)(),k=(0,t.useRef)(null),[B,b]=(0,t.useState)(""),[y,H]=(0,t.useState)(!1),[I,w]=(0,t.useState)(null),[R,S]=(0,t.useState)(!1),[V,L]=(0,t.useState)(!1),O=C.find(e=>e.id===N);(0,t.useEffect)(()=>{N&&_((0,o.H9)({chatId:N}))},[N,_]),(0,t.useEffect)(()=>{"global"===N&&_((0,o.$f)({chatId:N}))},[N,_]),(0,t.useEffect)(()=>{N||p("/home/chat/global")},[p,N,_]),(0,t.useEffect)(()=>{function e(e){k.current&&!k.current.contains(e.target)&&(S(!1),L(!1))}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[k]);const E=localStorage.getItem("theme")||"dark";return(0,x.jsxs)("div",{className:(0,n.A)(Y,"light"===E?F:"violet"===E?$:J),children:[(0,x.jsx)(T,{theme:E}),(0,x.jsxs)("div",{className:(0,n.A)(ee),children:[(0,x.jsx)(f,{isBlocked:(null===O||void 0===O||null===(e=O.user)||void 0===e?void 0:e.isBlocked)||(null===O||void 0===O||null===(s=O.user)||void 0===s?void 0:s.youAreBlocked),theme:E}),(0,x.jsx)("section",{className:se,children:(0,x.jsx)(a.sv,{context:{file:I}})})]}),(0,x.jsxs)("div",{className:le,children:[(0,x.jsxs)(j,{type:"textarea",textarea:!0,width:"100%",className:te,paddingLeft:"5px",placeholder:"Type here...",value:B,handleChange:e=>b(e.target.value),children:[(0,x.jsx)("button",{type:"button",className:ae,onClick:()=>{g.current.click()},children:(0,x.jsx)(v.EHs,{className:ne,size:16})}),(0,x.jsx)("input",{type:"file",ref:g,onChange:e=>{const s=e.target.files[0];s&&w(s)},style:{display:"none"}}),(0,x.jsxs)("div",{className:ie,children:[(0,x.jsx)("button",{type:"button",className:ae,onClick:()=>{H(e=>!e)},children:(0,x.jsx)(v.kqk,{className:oe,size:16})}),y&&(0,x.jsx)("div",{className:de,children:(0,x.jsx)(U.Ay,{onEmojiClick:e=>{b(s=>s+e.emoji)},width:250,height:300,previewConfig:{showPreview:!1},searchPlaceHolder:"Search emoji..."})})]})]}),(0,x.jsxs)("div",{ref:k,className:ce,children:[(null===O||void 0===O||null===(l=O.user)||void 0===l?void 0:l.isBlocked)&&!(null!==O&&void 0!==O&&null!==(c=O.user)&&void 0!==c&&c.youAreBlocked)&&R&&(0,x.jsxs)("p",{className:he,children:["\ud83d\udeab You have blocked ",(0,x.jsxs)("b",{children:[null===O||void 0===O||null===(r=O.user)||void 0===r?void 0:r.name," !"]})," Find them in"," ",(0,x.jsx)("b",{children:"Chats List \u2192 Settings"})," and unblock to send messages."]}),"global"!==N&&(null===O||void 0===O||null===(u=O.user)||void 0===u?void 0:u.youAreBlocked)&&V&&(0,x.jsxs)("p",{className:he,children:["\ud83d\udeab You are blocked by ",(0,x.jsxs)("b",{children:[null===O||void 0===O||null===(h=O.user)||void 0===h?void 0:h.name," !"]}),"You cannot send messages to them."]}),"global"===N&&V&&(0,x.jsxs)("p",{className:he,children:["\ud83d\udeab You are blocked by ",(0,x.jsx)("b",{children:"Admin !"}),"You cannot send messages to ",(0,x.jsx)("b",{children:"Global !"})," Please, contact"," ",(0,x.jsx)("b",{children:"Admin"})," for more info...!"]}),(0,x.jsx)("button",{type:"button",className:(0,n.A)(re,((null===O||void 0===O||null===(m=O.user)||void 0===m?void 0:m.isBlocked)||(null===O||void 0===O||null===(A=O.user)||void 0===A?void 0:A.youAreBlocked))&&ue),onClick:()=>{var e,s,l,t,a;(null===O||void 0===O||null===(e=O.user)||void 0===e||!e.isBlocked)&&(null===O||void 0===O||null===(s=O.user)||void 0===s||!s.youAreBlocked)&&B.trim()&&(_((0,o.wi)({chatId:N,newMessages:[{id:crypto.randomUUID(),content:B,isInbox:!1,sentAt:(new Date).toISOString()}]})),b(""),H(!1),w(null)),null===O||void 0===O||null===(l=O.user)||void 0===l||!l.isBlocked||null!==O&&void 0!==O&&null!==(t=O.user)&&void 0!==t&&t.youAreBlocked||(S(!R),L(!1)),null!==O&&void 0!==O&&null!==(a=O.user)&&void 0!==a&&a.youAreBlocked&&(L(!V),S(!1))},children:(0,x.jsx)(v.Cer,{className:ve,size:18})})]})]})]})}}}]);
//# sourceMappingURL=460.175b93bc.chunk.js.map